{"ast":null,"code":"'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.useAnimatedRef=useAnimatedRef;var _react=require(\"react\");var _useSharedValue=require(\"./useSharedValue.js\");var _fabricUtils=require(\"../fabricUtils\");var _shareables=require(\"../shareables.js\");var _shareableMappingCache=require(\"../shareableMappingCache.js\");var _reactNative=require(\"react-native\");var _findNodeHandle=require(\"../platformFunctions/findNodeHandle\");var _PlatformChecker=require(\"../PlatformChecker.js\");var IS_WEB=(0,_PlatformChecker.isWeb)();function getComponentOrScrollable(component){if((0,_PlatformChecker.isFabric)()&&component.getNativeScrollRef){return component.getNativeScrollRef();}else if(!(0,_PlatformChecker.isFabric)()&&component.getScrollableNode){return component.getScrollableNode();}return component;}function useAnimatedRef(){var tag=(0,_useSharedValue.useSharedValue)(-1);var viewName=(0,_useSharedValue.useSharedValue)(null);var ref=(0,_react.useRef)();if(!ref.current){var _fun=function fun(component){if(component){var getTagValueFunction=(0,_PlatformChecker.isFabric)()?_fabricUtils.getShadowNodeWrapperFromRef:_findNodeHandle.findNodeHandle;var getTagOrShadowNodeWrapper=function getTagOrShadowNodeWrapper(){return IS_WEB?getComponentOrScrollable(component):getTagValueFunction(getComponentOrScrollable(component));};tag.value=getTagOrShadowNodeWrapper();_fun.getTag=(0,_PlatformChecker.isFabric)()?function(){return(0,_findNodeHandle.findNodeHandle)(getComponentOrScrollable(component));}:getTagOrShadowNodeWrapper;_fun.current=component;if(_reactNative.Platform.OS==='ios'&&!(0,_PlatformChecker.isFabric)()){var _component$viewConfig;viewName.value=(component==null||(_component$viewConfig=component.viewConfig)==null?void 0:_component$viewConfig.uiViewClassName)||'RCTView';}}return tag.value;};_fun.current=null;var animatedRefShareableHandle=(0,_shareables.makeShareableCloneRecursive)({__init:function __init(){'worklet';var f=function f(){return tag.value;};f.viewName=viewName;return f;}});_shareableMappingCache.shareableMappingCache.set(_fun,animatedRefShareableHandle);ref.current=_fun;}return ref.current;}","map":{"version":3,"names":["Object","defineProperty","exports","value","useAnimatedRef","_react","require","_useSharedValue","_fabricUtils","_shareables","_shareableMappingCache","_reactNative","_findNodeHandle","_PlatformChecker","IS_WEB","isWeb","getComponentOrScrollable","component","isFabric","getNativeScrollRef","getScrollableNode","tag","useSharedValue","viewName","ref","useRef","current","fun","getTagValueFunction","getShadowNodeWrapperFromRef","findNodeHandle","getTagOrShadowNodeWrapper","getTag","Platform","OS","_component$viewConfig","viewConfig","uiViewClassName","animatedRefShareableHandle","makeShareableCloneRecursive","__init","f","shareableMappingCache","set"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/node_modules/react-native-reanimated/src/hook/useAnimatedRef.ts"],"sourcesContent":["'use strict';\nimport type { Component } from 'react';\nimport { useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport type { AnimatedRef, AnimatedRefOnUI } from './commonTypes';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { makeShareableCloneRecursive } from '../shareables';\nimport { shareableMappingCache } from '../shareableMappingCache';\nimport { Platform } from 'react-native';\nimport { findNodeHandle } from '../platformFunctions/findNodeHandle';\nimport type { ScrollView, FlatList } from 'react-native';\nimport { isFabric, isWeb } from '../PlatformChecker';\n\nconst IS_WEB = isWeb();\n\ninterface MaybeScrollableComponent extends Component {\n  getNativeScrollRef?: FlatList['getNativeScrollRef'];\n  getScrollableNode?:\n    | ScrollView['getScrollableNode']\n    | FlatList['getScrollableNode'];\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (isFabric() && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!isFabric() && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\n/**\n * Lets you get a reference of a view that you can use inside a worklet.\n *\n * @returns An object with a `.current` property which contains an instance of a\n *   component.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef\n */\nexport function useAnimatedRef<\n  TComponent extends Component,\n>(): AnimatedRef<TComponent> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<TComponent>>();\n\n  if (!ref.current) {\n    const fun: AnimatedRef<TComponent> = <AnimatedRef<TComponent>>((\n      component\n    ) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        const getTagValueFunction = isFabric()\n          ? getShadowNodeWrapperFromRef\n          : findNodeHandle;\n\n        const getTagOrShadowNodeWrapper = () => {\n          return IS_WEB\n            ? getComponentOrScrollable(component)\n            : getTagValueFunction(getComponentOrScrollable(component));\n        };\n\n        tag.value = getTagOrShadowNodeWrapper();\n\n        // On Fabric we have to unwrap the tag from the shadow node wrapper\n        fun.getTag = isFabric()\n          ? () => findNodeHandle(getComponentOrScrollable(component))\n          : getTagOrShadowNodeWrapper;\n\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !isFabric()) {\n          viewName.value =\n            (component as MaybeScrollableComponent)?.viewConfig\n              ?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const animatedRefShareableHandle = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f: AnimatedRefOnUI = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    shareableMappingCache.set(fun, animatedRefShareableHandle);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
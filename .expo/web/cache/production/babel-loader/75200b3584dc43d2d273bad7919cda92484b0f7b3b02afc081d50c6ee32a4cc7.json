{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _interfaces=require(\"../interfaces\");var _EventManager2=_interopRequireDefault(require(\"./EventManager\"));var _PointerType=require(\"../../PointerType\");function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var KeyboardEventManager=exports.default=function(_EventManager){function KeyboardEventManager(){var _this;(0,_classCallCheck2.default)(this,KeyboardEventManager);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper(this,KeyboardEventManager,[].concat(args));_defineProperty(_this,\"activationKeys\",['Enter',' ']);_defineProperty(_this,\"cancelationKeys\",['Tab']);_defineProperty(_this,\"isPressed\",false);_defineProperty(_this,\"keyDownCallback\",function(event){if(_this.cancelationKeys.indexOf(event.key)!==-1&&_this.isPressed){_this.dispatchEvent(event,_interfaces.EventTypes.CANCEL);return;}if(_this.activationKeys.indexOf(event.key)===-1){return;}_this.dispatchEvent(event,_interfaces.EventTypes.DOWN);});_defineProperty(_this,\"keyUpCallback\",function(event){if(_this.activationKeys.indexOf(event.key)===-1||!_this.isPressed){return;}_this.dispatchEvent(event,_interfaces.EventTypes.UP);});return _this;}(0,_inherits2.default)(KeyboardEventManager,_EventManager);return(0,_createClass2.default)(KeyboardEventManager,[{key:\"dispatchEvent\",value:function dispatchEvent(event,eventType){if(!(event.target instanceof HTMLElement)){return;}var adaptedEvent=this.mapEvent(event,eventType);switch(eventType){case _interfaces.EventTypes.UP:this.isPressed=false;this.onPointerUp(adaptedEvent);break;case _interfaces.EventTypes.DOWN:this.isPressed=true;this.onPointerDown(adaptedEvent);break;case _interfaces.EventTypes.CANCEL:this.isPressed=false;this.onPointerCancel(adaptedEvent);break;}}},{key:\"registerListeners\",value:function registerListeners(){this.view.addEventListener('keydown',this.keyDownCallback);this.view.addEventListener('keyup',this.keyUpCallback);}},{key:\"unregisterListeners\",value:function unregisterListeners(){this.view.removeEventListener('keydown',this.keyDownCallback);this.view.removeEventListener('keyup',this.keyUpCallback);}},{key:\"mapEvent\",value:function mapEvent(event,eventType){var viewRect=event.target.getBoundingClientRect();var viewportPosition={x:(viewRect===null||viewRect===void 0?void 0:viewRect.x)+(viewRect===null||viewRect===void 0?void 0:viewRect.width)/2,y:(viewRect===null||viewRect===void 0?void 0:viewRect.y)+(viewRect===null||viewRect===void 0?void 0:viewRect.height)/2};var relativePosition={x:(viewRect===null||viewRect===void 0?void 0:viewRect.width)/2,y:(viewRect===null||viewRect===void 0?void 0:viewRect.height)/2};return{x:viewportPosition.x,y:viewportPosition.y,offsetX:relativePosition.x,offsetY:relativePosition.y,pointerId:0,eventType:eventType,pointerType:_PointerType.PointerType.KEY,time:event.timeStamp};}}]);}(_EventManager2.default);","map":{"version":3,"names":["_interfaces","require","_EventManager2","_interopRequireDefault","_PointerType","_callSuper","t","o","e","_getPrototypeOf2","default","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","call","KeyboardEventManager","exports","_EventManager","_this","_classCallCheck2","_len","arguments","length","args","Array","_key","concat","_defineProperty","event","cancelationKeys","indexOf","key","isPressed","dispatchEvent","EventTypes","CANCEL","activationKeys","DOWN","UP","_inherits2","_createClass2","value","eventType","target","HTMLElement","adaptedEvent","mapEvent","onPointerUp","onPointerDown","onPointerCancel","registerListeners","view","addEventListener","keyDownCallback","keyUpCallback","unregisterListeners","removeEventListener","viewRect","getBoundingClientRect","viewportPosition","x","width","y","height","relativePosition","offsetX","offsetY","pointerId","pointerType","PointerType","KEY","time","timeStamp","EventManager"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/node_modules/react-native-gesture-handler/lib/module/web/tools/KeyboardEventManager.ts"],"sourcesContent":["import { AdaptedEvent, EventTypes } from '../interfaces';\nimport EventManager from './EventManager';\nimport { PointerType } from '../../PointerType';\n\nexport default class KeyboardEventManager extends EventManager<HTMLElement> {\n  private activationKeys = ['Enter', ' '];\n  private cancelationKeys = ['Tab'];\n  private isPressed = false;\n\n  private keyDownCallback = (event: KeyboardEvent): void => {\n    if (this.cancelationKeys.indexOf(event.key) !== -1 && this.isPressed) {\n      this.dispatchEvent(event, EventTypes.CANCEL);\n      return;\n    }\n\n    if (this.activationKeys.indexOf(event.key) === -1) {\n      return;\n    }\n\n    this.dispatchEvent(event, EventTypes.DOWN);\n  };\n\n  private keyUpCallback = (event: KeyboardEvent): void => {\n    if (this.activationKeys.indexOf(event.key) === -1 || !this.isPressed) {\n      return;\n    }\n\n    this.dispatchEvent(event, EventTypes.UP);\n  };\n\n  private dispatchEvent(event: KeyboardEvent, eventType: EventTypes) {\n    if (!(event.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const adaptedEvent = this.mapEvent(event, eventType);\n\n    switch (eventType) {\n      case EventTypes.UP:\n        this.isPressed = false;\n        this.onPointerUp(adaptedEvent);\n        break;\n      case EventTypes.DOWN:\n        this.isPressed = true;\n        this.onPointerDown(adaptedEvent);\n        break;\n      case EventTypes.CANCEL:\n        this.isPressed = false;\n        this.onPointerCancel(adaptedEvent);\n        break;\n    }\n  }\n\n  public registerListeners(): void {\n    this.view.addEventListener('keydown', this.keyDownCallback);\n    this.view.addEventListener('keyup', this.keyUpCallback);\n  }\n\n  public unregisterListeners(): void {\n    this.view.removeEventListener('keydown', this.keyDownCallback);\n    this.view.removeEventListener('keyup', this.keyUpCallback);\n  }\n\n  protected mapEvent(\n    event: KeyboardEvent,\n    eventType: EventTypes\n  ): AdaptedEvent {\n    const viewRect = (event.target as HTMLElement).getBoundingClientRect();\n\n    const viewportPosition = {\n      x: viewRect?.x + viewRect?.width / 2,\n      y: viewRect?.y + viewRect?.height / 2,\n    };\n\n    const relativePosition = {\n      x: viewRect?.width / 2,\n      y: viewRect?.height / 2,\n    };\n\n    return {\n      x: viewportPosition.x,\n      y: viewportPosition.y,\n      offsetX: relativePosition.x,\n      offsetY: relativePosition.y,\n      pointerId: 0,\n      eventType: eventType,\n      pointerType: PointerType.KEY,\n      time: event.timeStamp,\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
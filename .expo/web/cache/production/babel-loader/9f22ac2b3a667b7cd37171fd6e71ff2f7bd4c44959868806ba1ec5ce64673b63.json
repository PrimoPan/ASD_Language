{"ast":null,"code":"'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});exports.withDecay=void 0;var _util=require(\"../util.js\");var _rubberBandDecay=require(\"./rubberBandDecay.js\");var _utils=require(\"./utils.js\");var _rigidDecay=require(\"./rigidDecay.js\");var _errors=require(\"../../errors.js\");function validateConfig(config){'worklet';if(config.clamp){if(!Array.isArray(config.clamp)){throw new _errors.ReanimatedError(`\\`config.clamp\\` must be an array but is ${typeof config.clamp}.`);}if(config.clamp.length!==2){throw new _errors.ReanimatedError(`\\`clamp array\\` must contain 2 items but is given ${config.clamp.length}.`);}}if(config.velocityFactor<=0){throw new _errors.ReanimatedError(`\\`config.velocityFactor\\` must be greater then 0 but is ${config.velocityFactor}.`);}if(config.rubberBandEffect&&!config.clamp){throw new _errors.ReanimatedError('You need to set `clamp` property when using `rubberBandEffect`.');}}var withDecay=exports.withDecay=function withDecay(userConfig,callback){'worklet';return(0,_util.defineAnimation)(0,function(){'worklet';var _config$velocity;var config={deceleration:0.998,velocityFactor:1,velocity:0,rubberBandFactor:0.6};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}var decay=(0,_utils.isValidRubberBandConfig)(config)?function(animation,now){return(0,_rubberBandDecay.rubberBandDecay)(animation,now,config);}:function(animation,now){return(0,_rigidDecay.rigidDecay)(animation,now,config);};function onStart(animation,value,now){animation.current=value;animation.lastTimestamp=now;animation.startTimestamp=now;animation.initialVelocity=config.velocity;validateConfig(config);if(animation.reduceMotion&&config.clamp){if(value<config.clamp[0]){animation.current=config.clamp[0];}else if(value>config.clamp[1]){animation.current=config.clamp[1];}}}return{onFrame:decay,onStart:onStart,callback:callback,velocity:(_config$velocity=config.velocity)!=null?_config$velocity:0,initialVelocity:0,current:0,lastTimestamp:0,startTimestamp:0,reduceMotion:(0,_util.getReduceMotionForAnimation)(config.reduceMotion)};});};","map":{"version":3,"names":["Object","defineProperty","exports","value","withDecay","_util","require","_rubberBandDecay","_utils","_rigidDecay","_errors","validateConfig","config","clamp","Array","isArray","ReanimatedError","length","velocityFactor","rubberBandEffect","userConfig","callback","defineAnimation","_config$velocity","deceleration","velocity","rubberBandFactor","keys","forEach","key","decay","isValidRubberBandConfig","animation","now","rubberBandDecay","rigidDecay","onStart","current","lastTimestamp","startTimestamp","initialVelocity","reduceMotion","onFrame","getReduceMotionForAnimation"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/node_modules/react-native-reanimated/src/animation/decay/decay.ts"],"sourcesContent":["'use strict';\nimport { defineAnimation, getReduceMotionForAnimation } from '../util';\nimport type {\n  AnimationCallback,\n  Timestamp,\n  Animation,\n} from '../../commonTypes';\nimport { rubberBandDecay } from './rubberBandDecay';\nimport { isValidRubberBandConfig } from './utils';\nimport type {\n  DecayAnimation,\n  DecayConfig,\n  DefaultDecayConfig,\n  InnerDecayAnimation,\n} from './utils';\nimport { rigidDecay } from './rigidDecay';\nimport { ReanimatedError } from '../../errors';\n\nexport type WithDecayConfig = DecayConfig;\n\n// TODO TYPESCRIPT This is a temporary type to get rid of .d.ts file.\ntype withDecayType = (\n  userConfig: DecayConfig,\n  callback?: AnimationCallback\n) => number;\n\nfunction validateConfig(config: DefaultDecayConfig): void {\n  'worklet';\n  if (config.clamp) {\n    if (!Array.isArray(config.clamp)) {\n      throw new ReanimatedError(\n        `\\`config.clamp\\` must be an array but is ${typeof config.clamp}.`\n      );\n    }\n    if (config.clamp.length !== 2) {\n      throw new ReanimatedError(\n        `\\`clamp array\\` must contain 2 items but is given ${\n          config.clamp.length as number\n        }.`\n      );\n    }\n  }\n  if (config.velocityFactor <= 0) {\n    throw new ReanimatedError(\n      `\\`config.velocityFactor\\` must be greater then 0 but is ${config.velocityFactor}.`\n    );\n  }\n  if (config.rubberBandEffect && !config.clamp) {\n    throw new ReanimatedError(\n      'You need to set `clamp` property when using `rubberBandEffect`.'\n    );\n  }\n}\n\n/**\n * Lets you create animations that mimic objects in motion with friction.\n *\n * @param config - The decay animation configuration - {@link DecayConfig}.\n * @param callback - A function called upon animation completion -\n *   {@link AnimationCallback}.\n * @returns An [animation\n *   object](https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/glossary#animation-object)\n *   which holds the current state of the animation.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/animations/withDecay\n */\nexport const withDecay = function (\n  userConfig: DecayConfig,\n  callback?: AnimationCallback\n): Animation<DecayAnimation> {\n  'worklet';\n\n  return defineAnimation<DecayAnimation>(0, () => {\n    'worklet';\n    const config: DefaultDecayConfig = {\n      deceleration: 0.998,\n      velocityFactor: 1,\n      velocity: 0,\n      rubberBandFactor: 0.6,\n    };\n    if (userConfig) {\n      Object.keys(userConfig).forEach(\n        (key) =>\n          ((config as any)[key] = userConfig[key as keyof typeof userConfig])\n      );\n    }\n\n    const decay: (animation: InnerDecayAnimation, now: number) => boolean =\n      isValidRubberBandConfig(config)\n        ? (animation, now) => rubberBandDecay(animation, now, config)\n        : (animation, now) => rigidDecay(animation, now, config);\n\n    function onStart(\n      animation: DecayAnimation,\n      value: number,\n      now: Timestamp\n    ): void {\n      animation.current = value;\n      animation.lastTimestamp = now;\n      animation.startTimestamp = now;\n      animation.initialVelocity = config.velocity;\n      validateConfig(config);\n\n      if (animation.reduceMotion && config.clamp) {\n        if (value < config.clamp[0]) {\n          animation.current = config.clamp[0];\n        } else if (value > config.clamp[1]) {\n          animation.current = config.clamp[1];\n        }\n      }\n    }\n\n    return {\n      onFrame: decay,\n      onStart,\n      callback,\n      velocity: config.velocity ?? 0,\n      initialVelocity: 0,\n      current: 0,\n      lastTimestamp: 0,\n      startTimestamp: 0,\n      reduceMotion: getReduceMotionForAnimation(config.reduceMotion),\n    } as DecayAnimation;\n  });\n} as unknown as withDecayType;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
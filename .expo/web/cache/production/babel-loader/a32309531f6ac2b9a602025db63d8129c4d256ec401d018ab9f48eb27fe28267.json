{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _axios=_interopRequireDefault(require(\"axios\"));var _jsxRuntime=require(\"react/jsx-runtime\");function _getRequireWildcardCache(e){if(\"function\"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var ImageGenerator=function ImageGenerator(){var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),description=_useState2[0],setDescription=_useState2[1];var _useState3=(0,_react.useState)(''),_useState4=(0,_slicedToArray2.default)(_useState3,2),imageUrl=_useState4[0],setImageUrl=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2.default)(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var handleGenerateImage=function(){var _ref=(0,_asyncToGenerator2.default)(function*(){if(!description.trim()){_reactNative.Alert.alert('错误','请输入图片描述！');return;}setLoading(true);try{var response=yield _axios.default.post('http://47.242.78.104:6088/i/pic',{uid:'a81s',picreq:description},{headers:{'Content-Type':'application/json'}});var data=response.data.data;setImageUrl(data);}catch(error){console.error('请求失败:',error);_reactNative.Alert.alert('错误','生成图片失败，请重试！');}finally{setLoading(false);}});return function handleGenerateImage(){return _ref.apply(this,arguments);};}();return(0,_jsxRuntime.jsxs)(_reactNative.ScrollView,{contentContainerStyle:styles.container,children:[(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:styles.input,placeholder:\"\\u8BF7\\u8F93\\u5165\\u56FE\\u7247\\u63CF\\u8FF0\",value:description,onChangeText:setDescription,editable:!loading}),(0,_jsxRuntime.jsx)(_reactNative.Button,{title:loading?'生成中...':'生成图片',onPress:handleGenerateImage,disabled:loading}),imageUrl?(0,_jsxRuntime.jsx)(_reactNative.Image,{source:{uri:imageUrl},style:styles.image,resizeMode:\"contain\"}):null]});};var styles=_reactNative.StyleSheet.create({container:{flexGrow:1,justifyContent:'center',alignItems:'center',padding:16,backgroundColor:'#f5f5f5'},input:{width:'100%',padding:12,marginBottom:20,borderWidth:1,borderColor:'#ccc',borderRadius:8,backgroundColor:'#fff'},image:{width:300,height:300,marginTop:20,borderWidth:1,borderColor:'#ccc'}});var _default=exports.default=ImageGenerator;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_axios","_interopRequireDefault","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ImageGenerator","_useState","useState","_useState2","_slicedToArray2","description","setDescription","_useState3","_useState4","imageUrl","setImageUrl","_useState5","_useState6","loading","setLoading","handleGenerateImage","_ref","_asyncToGenerator2","trim","Alert","alert","response","axios","post","uid","picreq","headers","data","error","console","apply","arguments","jsxs","ScrollView","contentContainerStyle","styles","container","children","jsx","TextInput","style","input","placeholder","value","onChangeText","editable","Button","title","onPress","disabled","Image","source","uri","image","resizeMode","StyleSheet","create","flexGrow","justifyContent","alignItems","padding","backgroundColor","width","marginBottom","borderWidth","borderColor","borderRadius","height","marginTop","_default","exports"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/SourceCode/Components/ImageGenerator/index.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, TextInput, Button, StyleSheet, Image, Alert, ScrollView } from 'react-native';\nimport axios from 'axios';\n\nconst ImageGenerator = () => {\n    const [description, setDescription] = useState(''); // 用户输入的图片描述\n    const [imageUrl, setImageUrl] = useState(''); // 返回的图片 URL\n    const [loading, setLoading] = useState(false); // 请求状态\n\n    const handleGenerateImage = async () => {\n        if (!description.trim()) {\n            Alert.alert('错误', '请输入图片描述！');\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await axios.post(\n                'http://47.242.78.104:6088/i/pic', // 文生图接口地址\n                {\n                    uid: 'a81s', // 替换为后端提供的用户标识\n                    picreq: description, // 用户输入的描述\n                },\n                {\n                    headers: {\n                        'Content-Type': 'application/json', // 设置请求头\n                    },\n                }\n            );\n\n            const { data } = response.data; // 获取返回的图片 URL\n            setImageUrl(data); // 设置图片 URL\n        } catch (error) {\n            console.error('请求失败:', error);\n            Alert.alert('错误', '生成图片失败，请重试！');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <ScrollView contentContainerStyle={styles.container}>\n            <TextInput\n                style={styles.input}\n                placeholder=\"请输入图片描述\"\n                value={description}\n                onChangeText={setDescription}\n                editable={!loading} // 禁用输入框防止重复提交\n            />\n            <Button title={loading ? '生成中...' : '生成图片'} onPress={handleGenerateImage} disabled={loading} />\n            {imageUrl ? (\n                <Image\n                    source={{ uri: imageUrl }}\n                    style={styles.image}\n                    resizeMode=\"contain\"\n                />\n            ) : null}\n        </ScrollView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flexGrow: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: 16,\n        backgroundColor: '#f5f5f5',\n    },\n    input: {\n        width: '100%',\n        padding: 12,\n        marginBottom: 20,\n        borderWidth: 1,\n        borderColor: '#ccc',\n        borderRadius: 8,\n        backgroundColor: '#fff',\n    },\n    image: {\n        width: 300,\n        height: 300,\n        marginTop: 20,\n        borderWidth: 1,\n        borderColor: '#ccc',\n    },\n});\n\nexport default ImageGenerator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
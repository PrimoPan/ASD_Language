{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useViewRefHandler=useViewRefHandler;var _utils=require(\"../../../utils\");var _getShadowNodeFromRef=require(\"../../../getShadowNodeFromRef\");var _react=require(\"react\");var _findNodeHandle=_interopRequireDefault(require(\"../../../findNodeHandle\"));function useViewRefHandler(state,updateAttachedGestures){var refHandler=(0,_react.useCallback)(function(ref){if(ref===null){return;}state.viewRef=ref;if(state.previousViewTag===-1){state.previousViewTag=(0,_findNodeHandle.default)(state.viewRef);}if(!state.firstRender){updateAttachedGestures(true);}if(__DEV__&&(0,_utils.isFabric)()&&global.isFormsStackingContext){var node=(0,_getShadowNodeFromRef.getShadowNodeFromRef)(ref);if(global.isFormsStackingContext(node)===false){console.error((0,_utils.tagMessage)('GestureDetector has received a child that may get view-flattened. '+'\\nTo prevent it from misbehaving you need to wrap the child with a `<View collapsable={false}>`.'));}}},[state,updateAttachedGestures]);return refHandler;}","map":{"version":3,"names":["_utils","require","_getShadowNodeFromRef","_react","_findNodeHandle","_interopRequireDefault","useViewRefHandler","state","updateAttachedGestures","refHandler","useCallback","ref","viewRef","previousViewTag","findNodeHandle","firstRender","__DEV__","isFabric","global","isFormsStackingContext","node","getShadowNodeFromRef","console","error","tagMessage"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/node_modules/react-native-gesture-handler/lib/module/handlers/gestures/GestureDetector/useViewRefHandler.ts"],"sourcesContent":["import { isFabric, tagMessage } from '../../../utils';\nimport { getShadowNodeFromRef } from '../../../getShadowNodeFromRef';\n\nimport { GestureDetectorState } from './types';\nimport React, { useCallback } from 'react';\nimport findNodeHandle from '../../../findNodeHandle';\n\ndeclare const global: {\n  isFormsStackingContext: (node: unknown) => boolean | null; // JSI function\n};\n\n// Ref handler for the Wrap component attached under the GestureDetector.\n// It's responsible for setting the viewRef on the state and triggering the reattaching of handlers\n// if the view has changed.\nexport function useViewRefHandler(\n  state: GestureDetectorState,\n  updateAttachedGestures: (skipConfigUpdate?: boolean) => void\n) {\n  const refHandler = useCallback(\n    (ref: React.Component | null) => {\n      if (ref === null) {\n        return;\n      }\n\n      state.viewRef = ref;\n\n      // if it's the first render, also set the previousViewTag to prevent reattaching gestures when not needed\n      if (state.previousViewTag === -1) {\n        state.previousViewTag = findNodeHandle(state.viewRef) as number;\n      }\n\n      // Pass true as `skipConfigUpdate`. Here we only want to trigger the eventual reattaching of handlers\n      // in case the view has changed. If the view doesn't change, the update will be handled by detector.\n      if (!state.firstRender) {\n        updateAttachedGestures(true);\n      }\n\n      if (__DEV__ && isFabric() && global.isFormsStackingContext) {\n        const node = getShadowNodeFromRef(ref);\n        if (global.isFormsStackingContext(node) === false) {\n          console.error(\n            tagMessage(\n              'GestureDetector has received a child that may get view-flattened. ' +\n                '\\nTo prevent it from misbehaving you need to wrap the child with a `<View collapsable={false}>`.'\n            )\n          );\n        }\n      }\n    },\n    [state, updateAttachedGestures]\n  );\n\n  return refHandler;\n}\n"],"mappings":"wLAAA,IAAAA,MAAA,CAAAC,OAAA,mBACA,IAAAC,qBAAA,CAAAD,OAAA,kCAGA,IAAAE,MAAA,CAAAF,OAAA,UACA,IAAAG,eAAA,CAAAC,sBAAA,CAAAJ,OAAA,6BASO,QAAS,CAAAK,iBAATA,CACLC,KADK,CAELC,sBAFK,CAGL,CACA,GAAM,CAAAC,UAAU,CAAG,GAAAC,kBAAW,EAC3B,SAAAC,GAAD,CAAiC,CAC/B,GAAIA,GAAG,GAAK,IAAZ,CAAkB,CAChB,OACD,CAEDJ,KAAK,CAACK,OAAN,CAAgBD,GAAhB,CAGA,GAAIJ,KAAK,CAACM,eAAN,GAA0B,CAAC,CAA/B,CAAkC,CAChCN,KAAK,CAACM,eAAN,CAAwB,GAAAC,uBAAc,EAACP,KAAK,CAACK,OAAP,CAAtC,CACD,CAID,GAAI,CAACL,KAAK,CAACQ,WAAX,CAAwB,CACtBP,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAED,GAAIQ,OAAO,EAAI,GAAAC,eAAQ,GAAnB,EAAyBC,MAAM,CAACC,sBAApC,CAA4D,CAC1D,GAAM,CAAAC,IAAI,CAAG,GAAAC,0CAAoB,EAACV,GAAD,CAAjC,CACA,GAAIO,MAAM,CAACC,sBAAP,CAA8BC,IAA9B,IAAwC,KAA5C,CAAmD,CACjDE,OAAO,CAACC,KAAR,CACE,GAAAC,iBAAU,EACR,qEACE,kGAFM,CADZ,EAMD,CACF,CACF,CA9B2B,CA+B5B,CAACjB,KAAD,CAAQC,sBAAR,CA/B4B,CAA9B,CAkCA,MAAO,CAAAC,UAAP,CACD","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
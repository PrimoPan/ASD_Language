{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _store=_interopRequireDefault(require(\"../store/store\"));var _jsxRuntime=require(\"react/jsx-runtime\");function _getRequireWildcardCache(e){if(\"function\"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var Login=function Login(_ref){var navigation=_ref.navigation;var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=(0,_react.useState)(''),_useState4=(0,_slicedToArray2.default)(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useStore=(0,_store.default)(),user=_useStore.user,setUsernameInStore=_useStore.setUsername,setUsernameAsync=_useStore.setUsernameAsync;var handleLogin=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(){if(username&&password){try{yield setUsernameAsync(username);alert('登录成功');navigation.replace('CreateChildren');}catch(error){alert('登录失败，请重试');}}else{alert('请输入用户名和密码');}});return function handleLogin(){return _ref2.apply(this,arguments);};}();var handleRegister=function handleRegister(){if(username&&password){alert('注册成功');}else{alert('请输入用户名和密码');}};return(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.container,children:[(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.title,children:\"\\u6559\\u5E08\\u767B\\u5F55\"}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:styles.input,placeholder:\"\\u7528\\u6237\\u540D\",value:username,onChangeText:setUsername}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:styles.input,placeholder:\"\\u5BC6\\u7801\",value:password,onChangeText:setPassword,secureTextEntry:true}),(0,_jsxRuntime.jsx)(_reactNative.Button,{title:\"\\u767B\\u5F55\",onPress:handleLogin}),(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.orText,children:\"\\u6216\"}),(0,_jsxRuntime.jsx)(_reactNative.Button,{title:\"\\u6CE8\\u518C\",onPress:handleRegister}),user!=null&&user.username?(0,_jsxRuntime.jsxs)(_reactNative.Text,{children:[\"\\u6B22\\u8FCE, \",user.username,\"!\"]}):null]});};var styles=_reactNative.StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',padding:16,backgroundColor:'#E0F7FA'},title:{fontSize:24,marginBottom:20},input:{width:'33%',padding:12,marginBottom:10,borderWidth:1,borderColor:'#ddd',borderRadius:4},orText:{marginVertical:10,fontSize:16}});var _default=exports.default=Login;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_store","_interopRequireDefault","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","Login","_ref","navigation","_useState","useState","_useState2","_slicedToArray2","username","setUsername","_useState3","_useState4","password","setPassword","_useStore","useStore","user","setUsernameInStore","setUsernameAsync","handleLogin","_ref2","_asyncToGenerator2","alert","replace","error","apply","arguments","handleRegister","jsxs","View","style","styles","container","children","jsx","Text","title","TextInput","input","placeholder","value","onChangeText","secureTextEntry","Button","onPress","orText","StyleSheet","create","flex","justifyContent","alignItems","padding","backgroundColor","fontSize","marginBottom","width","borderWidth","borderColor","borderRadius","marginVertical","_default","exports"],"sources":["/Users/primopan/WebstormProjects/AsdLanguauge/AsdLanguage/SourceCode/Login/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, TextInput, Button, Text, StyleSheet } from 'react-native';\nimport useStore from '../store/store'; // 引入 zustand store\n\nconst Login = ({ navigation }) => {  // 获取navigation props\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const { user, setUsername: setUsernameInStore, setUsernameAsync } = useStore();\n\n  const handleLogin = async () => {\n    if (username && password) {\n      try {\n        await setUsernameAsync(username);  // 异步设置用户名\n        alert('登录成功');\n        navigation.replace('CreateChildren');\n      } catch (error) {\n        alert('登录失败，请重试');\n      }\n    } else {\n      alert('请输入用户名和密码');\n    }\n  };\n\n  const handleRegister = () => {\n    if (username && password) {\n      alert('注册成功');\n    } else {\n      alert('请输入用户名和密码');\n    }\n  };\n\n  return (\n      <View style={styles.container}>\n        <Text style={styles.title}>教师登录</Text>\n        <TextInput\n            style={styles.input}\n            placeholder=\"用户名\"\n            value={username}\n            onChangeText={setUsername}\n        />\n        <TextInput\n            style={styles.input}\n            placeholder=\"密码\"\n            value={password}\n            onChangeText={setPassword}\n            secureTextEntry\n        />\n        <Button title=\"登录\" onPress={handleLogin} />\n        <Text style={styles.orText}>或</Text>\n        <Button title=\"注册\" onPress={handleRegister} />\n        {user?.username ? <Text>欢迎, {user.username}!</Text> : null}\n      </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 16,\n    backgroundColor: '#E0F7FA', // 修改背景颜色\n  },\n  title: {\n    fontSize: 24,\n    marginBottom: 20,\n  },\n  input: {\n    width: '33%',\n    padding: 12,\n    marginBottom: 10,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 4,\n  },\n  orText: {\n    marginVertical: 10,\n    fontSize: 16,\n  },\n});\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}